{% extends 'prediction/base.html' %}

{% block title %}Home - RecoveryAI Prediction System{% endblock %}

{% block content %}

<!-- Hero Section with Animated Background -->
<section class="hero-modern">
    <div class="hero-overlay"></div>
    <div class="container">
        <div class="row align-items-center min-vh-100">
            <div class="col-lg-6" data-aos="fade-right">
                <div class="hero-content">
                    <span class="hero-badge" data-aos="zoom-in" data-aos-delay="100">
                        <i class="fas fa-sparkles"></i> AI-Powered Healthcare
                    </span>
                    <h1 class="hero-title" data-aos="fade-up" data-aos-delay="200">
                        Transform Recovery 
                        <span class="gradient-text">with Intelligence</span>
                    </h1>
                    <p class="hero-subtitle" data-aos="fade-up" data-aos-delay="300">
                        Harness the power of machine learning to predict recovery timelines with unprecedented accuracy. Our advanced AI analyzes multiple factors to provide personalized recovery insights.
                    </p>
                    <div class="hero-buttons" data-aos="fade-up" data-aos-delay="400">
                        <a href="{% url 'predict' %}" class="btn-hero btn-hero-primary">
                            <span>Start Prediction</span>
                            <i class="fas fa-arrow-right"></i>
                        </a>
                        <a href="#features" class="btn-hero btn-hero-secondary">
                            <i class="fas fa-play-circle"></i>
                            <span>Learn More</span>
                        </a>
                    </div>
                    <div class="hero-stats" data-aos="fade-up" data-aos-delay="500">
                        <div class="stat-item">
                            <div class="stat-number">95%</div>
                            <div class="stat-label">Accuracy</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">10K+</div>
                            <div class="stat-label">Predictions</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">24/7</div>
                            <div class="stat-label">Support</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6" data-aos="fade-left" data-aos-delay="200">
                <div class="hero-image-wrapper">
                    <div class="floating-card card-1" data-aos="zoom-in" data-aos-delay="600">
                        <i class="fas fa-brain"></i>
                        <span>AI Analysis</span>
                    </div>
                    <div class="floating-card card-2" data-aos="zoom-in" data-aos-delay="700">
                        <i class="fas fa-chart-line"></i>
                        <span>Real-time Data</span>
                    </div>
                    <div class="floating-card card-3" data-aos="zoom-in" data-aos-delay="800">
                        <i class="fas fa-shield-alt"></i>
                        <span>Secure & Private</span>
                    </div>
                    <img src="https://images.unsplash.com/photo-1576091160399-112ba8d25d1d?w=800&h=800&fit=crop" alt="Medical AI" class="hero-main-image">
                    <div class="hero-image-glow"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="scroll-indicator">
        <div class="mouse">
            <div class="wheel"></div>
        </div>
        <p>Scroll to explore</p>
    </div>
</section>

<!-- Features Section -->
<section class="features-section" id="features">
    <div class="container">
        <div class="section-header text-center" data-aos="fade-up">
            <span class="section-badge">Our Features</span>
            <h2 class="section-title">Powerful AI-Driven Insights</h2>
            <p class="section-subtitle">Experience the future of addiction recovery prediction</p>
        </div>

        <div class="row g-4">
            <div class="col-md-6 col-lg-3" data-aos="fade-up" data-aos-delay="100">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <h3 class="feature-title">Machine Learning</h3>
                    <p class="feature-text">Advanced Random Forest algorithms trained on comprehensive recovery data for accurate predictions.</p>
                    <a href="#" class="feature-link">Learn more <i class="fas fa-arrow-right"></i></a>
                </div>
            </div>

            <div class="col-md-6 col-lg-3" data-aos="fade-up" data-aos-delay="200">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <h3 class="feature-title">Real-time Analysis</h3>
                    <p class="feature-text">Get instant recovery time estimates with probability breakdowns in seconds.</p>
                    <a href="#" class="feature-link">Learn more <i class="fas fa-arrow-right"></i></a>
                </div>
            </div>

            <div class="col-md-6 col-lg-3" data-aos="fade-up" data-aos-delay="300">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-user-md"></i>
                    </div>
                    <h3 class="feature-title">Personalized Results</h3>
                    <p class="feature-text">Tailored predictions based on individual patient characteristics and treatment factors.</p>
                    <a href="#" class="feature-link">Learn more <i class="fas fa-arrow-right"></i></a>
                </div>
            </div>

            <div class="col-md-6 col-lg-3" data-aos="fade-up" data-aos-delay="400">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h3 class="feature-title">Secure & Private</h3>
                    <p class="feature-text">HIPAA-compliant data handling with end-to-end encryption for patient privacy.</p>
                    <a href="#" class="feature-link">Learn more <i class="fas fa-arrow-right"></i></a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- How It Works -->
<section class="workflow-section">
    <div class="container">
        <div class="section-header text-center" data-aos="fade-up">
            <span class="section-badge">Simple Process</span>
            <h2 class="section-title">How It Works</h2>
            <p class="section-subtitle">Get accurate predictions in just 4 simple steps</p>
        </div>

        <div class="workflow-timeline">
            <div class="workflow-item" data-aos="fade-right" data-aos-delay="100">
                <div class="workflow-number">01</div>
                <div class="workflow-content">
                    <div class="workflow-image">
                        <img src="https://images.unsplash.com/photo-1576091160550-2173dba999ef?w=400&h=400&fit=crop" alt="Input Data">
                    </div>
                    <h3>Enter Patient Data</h3>
                    <p>Input comprehensive patient information including demographics, addiction details, and treatment history.</p>
                </div>
            </div>

            <div class="workflow-connector" data-aos="fade-left"></div>

            <div class="workflow-item" data-aos="fade-left" data-aos-delay="200">
                <div class="workflow-number">02</div>
                <div class="workflow-content">
                    <div class="workflow-image">
                        <img src="https://images.unsplash.com/photo-1677442136019-21780ecad995?w=400&h=400&fit=crop" alt="AI Analysis">
                    </div>
                    <h3>AI Analysis</h3>
                    <p>Our machine learning models process the data using advanced algorithms and pattern recognition.</p>
                </div>
            </div>

            <div class="workflow-connector" data-aos="fade-right"></div>

            <div class="workflow-item" data-aos="fade-right" data-aos-delay="300">
                <div class="workflow-number">03</div>
                <div class="workflow-content">
                    <div class="workflow-image">
                        <img src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=400&h=400&fit=crop" alt="Get Prediction">
                    </div>
                    <h3>Get Prediction</h3>
                    <p>Receive detailed recovery time estimates with confidence scores and category classifications.</p>
                </div>
            </div>

            <div class="workflow-connector" data-aos="fade-left"></div>

            <div class="workflow-item" data-aos="fade-left" data-aos-delay="400">
                <div class="workflow-number">04</div>
                <div class="workflow-content">
                    <div class="workflow-image">
                        <img src="https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=400&h=400&fit=crop" alt="View Insights">
                    </div>
                    <h3>View Insights</h3>
                    <p>Explore comprehensive probability breakdowns and detailed analytics for informed decision-making.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Statistics Section -->
<section class="stats-section">
    <div class="container">
        <div class="row g-4">
            <div class="col-md-3 col-sm-6" data-aos="zoom-in" data-aos-delay="100">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-value" data-count="10000">0</div>
                    <div class="stat-title">Active Users</div>
                </div>
            </div>
            <div class="col-md-3 col-sm-6" data-aos="zoom-in" data-aos-delay="200">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="stat-value" data-count="95">0</div>
                    <div class="stat-title">Accuracy Rate</div>
                </div>
            </div>
            <div class="col-md-3 col-sm-6" data-aos="zoom-in" data-aos-delay="300">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-value" data-count="24">0</div>
                    <div class="stat-title">Hours Support</div>
                </div>
            </div>
            <div class="col-md-3 col-sm-6" data-aos="zoom-in" data-aos-delay="400">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-award"></i>
                    </div>
                    <div class="stat-value" data-count="100">0</div>
                    <div class="stat-title">Success Rate</div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Recent Predictions -->
{% if recent_predictions %}
<section class="predictions-section">
    <div class="container">
        <div class="section-header text-center" data-aos="fade-up">
            <span class="section-badge">Latest Activity</span>
            <h2 class="section-title">Recent Predictions</h2>
            <p class="section-subtitle">Real-time predictions from our AI system</p>
        </div>

        <div class="predictions-table-wrapper" data-aos="fade-up" data-aos-delay="200">
            <table class="predictions-table">
                <thead>
                    <tr>
                        <th>Date & Time</th>
                        <th>Age</th>
                        <th>Gender</th>
                        <th>Drug Type</th>
                        <th>Category</th>
                        <th>Estimated Time</th>
                    </tr>
                </thead>
                <tbody>
                    {% for pred in recent_predictions %}
                    <tr>
                        <td>
                            <i class="fas fa-calendar-alt"></i>
                            {{ pred.created_at|date:"M d, Y H:i" }}
                        </td>
                        <td>{{ pred.age }} yrs</td>
                        <td>
                            <i class="fas fa-{% if pred.gender == 'Male' %}mars{% else %}venus{% endif %}"></i>
                            {{ pred.gender }}
                        </td>
                        <td>
                            <span class="drug-badge">{{ pred.drug_type }}</span>
                        </td>
                        <td>
                            <span class="category-badge 
                                {% if 'Short' in pred.predicted_class %}badge-success
                                {% elif 'Medium' in pred.predicted_class %}badge-warning
                                {% else %}badge-danger{% endif %}">
                                {{ pred.predicted_class }}
                            </span>
                        </td>
                        <td>
                            <strong>{{ pred.predicted_months }} months</strong>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</section>
{% endif %}

<!-- CTA Section -->
<section class="cta-section">
    <div class="container">
        <div class="cta-card" data-aos="zoom-in">
            <div class="row align-items-center">
                <div class="col-lg-8">
                    <h2 class="cta-title">Ready to Get Started?</h2>
                    <p class="cta-text">Begin your recovery prediction journey today with our AI-powered system.</p>
                </div>
                <div class="col-lg-4 text-lg-end">
                    <a href="{% url 'predict' %}" class="btn-cta">
                        <span>Make a Prediction</span>
                        <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

{% endblock %}

{% block extra_js %}
<script>
    // Counter Animation
    function animateCounter(element) {
        const target = parseInt(element.getAttribute('data-count'));
        const duration = 2000;
        const step = target / (duration / 16);
        let current = 0;

        const timer = setInterval(() => {
            current += step;
            if (current >= target) {
                element.textContent = target + (element.closest('.stat-card').querySelector('.stat-title').textContent.includes('Rate') ? '%' : '+');
                clearInterval(timer);
            } else {
                element.textContent = Math.floor(current) + (element.closest('.stat-card').querySelector('.stat-title').textContent.includes('Rate') ? '%' : '+');
            }
        }, 16);
    }

    // Trigger counter animation when in viewport
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const counters = entry.target.querySelectorAll('.stat-value');
                counters.forEach(counter => {
                    if (counter.textContent === '0') {
                        animateCounter(counter);
                    }
                });
                observer.unobserve(entry.target);
            }
        });
    }, { threshold: 0.5 });

    const statsSection = document.querySelector('.stats-section');
    if (statsSection) {
        observer.observe(statsSection);
    }
</script>
{% endblock %}